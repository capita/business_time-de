require 'testrocket'
require 'business_time-de'

+-> { 7.business_days.after(Date.parse("2012-03-28")).to_date == Date.parse("2012-04-10") }
+-> { Date.parse("2012-04-10").workday? }
--> { Date.parse("2012-04-09").workday? }

(2000..2099).each do |year|
  --> { Date.parse("#{year}-01-01").workday? }
  --> { Date.parse("#{year}-05-01").workday? }
  --> { Date.parse("#{year}-10-03").workday? }
  --> { Date.parse("#{year}-12-25").workday? }
  --> { Date.parse("#{year}-12-26").workday? }
end

# Ultimate easter date list, nicked from http://www.assa.org.au/edm.html
["2000-04-23", "2001-04-15", "2002-03-31", "2003-04-20", "2004-04-11", "2005-03-27", "2006-04-16", "2007-04-08", "2008-03-23", "2009-04-12", "2010-04-04", "2011-04-24", "2012-04-08", "2013-03-31", "2014-04-20", "2015-04-05", "2016-03-27", "2017-04-16", "2018-04-01", "2019-04-21", "2020-04-12", "2021-04-04", "2022-04-17", "2023-04-09", "2024-03-31", "2025-04-20", "2026-04-05", "2027-03-28", "2028-04-16", "2029-04-01", "2030-04-21", "2031-04-13", "2032-03-28", "2033-04-17", "2034-04-09", "2035-03-25", "2036-04-13", "2037-04-05", "2038-04-25", "2039-04-10", "2040-04-01", "2041-04-21", "2042-04-06", "2043-03-29", "2044-04-17", "2045-04-09", "2046-03-25", "2047-04-14", "2048-04-05", "2049-04-18", "2050-04-10", "2051-04-02", "2052-04-21", "2053-04-06", "2054-03-29", "2055-04-18", "2056-04-02", "2057-04-22", "2058-04-14", "2059-03-30", "2060-04-18", "2061-04-10", "2062-03-26", "2063-04-15", "2064-04-06", "2065-03-29", "2066-04-11", "2067-04-03", "2068-04-22", "2069-04-14", "2070-03-30", "2071-04-19", "2072-04-10", "2073-03-26", "2074-04-15", "2075-04-07", "2076-04-19", "2077-04-11", "2078-04-03", "2079-04-23", "2080-04-07", "2081-03-30", "2082-04-19", "2083-04-04", "2084-03-26", "2085-04-15", "2086-03-31", "2087-04-20", "2088-04-11", "2089-04-03", "2090-04-16", "2091-04-08", "2092-03-30", "2093-04-12", "2094-04-04", "2095-04-24", "2096-04-15", "2097-03-31", "2098-04-20", "2099-04-12"].each do |d|
  easter = Date.parse(d)
  --> { (easter + 1.day).workday? } # Ostermontag
  --> { (easter - 1.day).workday? } # Saturday
  --> { (easter - 2.days).workday? } # Karfreitag

  +-> { (easter - 3.days).workday? } # GrÃ¼ndonnerstag
  # The next business day after grÃ¼ndonnerstag is tuesday...
  +-> { 1.business_day.after(easter - 3.days).to_date == (easter+2.days).to_date }
end